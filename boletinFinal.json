{
    "setup": {
        "desc": "Bfinal",
        "shell": "simplesh",
        "prompt": "mizu@.*> ",
        "timeout": 3,
        "cmds": [
            "touch f1",
            "touch f2",
            "mkdir dir",
            "mkdir olddir"
        ]
    },
    "tests": [
        {
            "cmd": "echo -n jobs: ; sleep 1 & ; sleep 2 ; echo -n zombies: ; ps aux | grep [d]efun",
            "out": "^jobs:(\\[[0-9]{1,5}\\][\\r\\n]*){2}zombies:$"
        },
        {
            "cmd": "echo -n jobs: ; sleep 1 & ; sleep 2 ; echo -n zombies: ; ps aux | grep [d]efun | wc -l",
            "out": "^jobs:(\\[[0-9]{1,5}\\][\\r\\n]*){2}zombies:0\\r\\n$"
        },
        {
            "cmd": "sleep 1 & ; sleep 2 ; echo -n survivors: ; bjobs",
            "out": "^(\\[[0-9]{1,5}\\][\\r\\n]*){2}survivors:$"
        },
        {
            "cmd": "sleep 1 & ; sleep 2 ; echo -n nsurvivors: ; bjobs | wc -l",
            "out": "^(\\[[0-9]{1,5}\\][\\r\\n]*){2}nsurvivors:0\\r\\n$"
        },
        {
            "cmd": "sleep 5 & ; sleep 5 & ; bjobs | tr -d '[]' | xargs -- kill -s SIGKILL ; sleep 1 ; echo -n survivors: ; bjobs | wc -l",
            "out": "^(\\[[0-9]{1,5}\\][\\r\\n]*){4}survivors:0\\r\\n$"
        },
        {
            "cmd": "sleep 5 & ; sleep 5 & ; bjobs | tr -d '[]' | xargs -- kill -s SIGKILL ; sleep 1 ; echo -n zombies: ; ps aux | grep [d]efun | wc -l",
            "out": "^(\\[[0-9]{1,5}\\][\\r\\n]*){4}zombies:0\\r\\n"
        },
        {
            "cmd": "echo -n jobs: ; sleep 5 & ; sleep 5 & ; bjobs -k ; sleep 1 ; echo -n survivors: ; bjobs",
            "out": "^jobs:(\\[[0-9]{1,5}\\][\\r\\n]*){4}survivors:$"
        },
        {
            "cmd": "echo -n jobs: ; sleep 5 & ; sleep 5 & ; bjobs -k ; sleep 1 ; echo -n zombies: ; ps aux | grep [d]efun | wc -l",
            "out": "^jobs:(\\[[0-9]{1,5}\\][\\r\\n]*){4}zombies:0\\r\\n$"
        }
    ]
}
